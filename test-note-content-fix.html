<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Note Content Fix Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .test-container {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-case {
            margin-bottom: 20px;
            padding: 15px;
            border: 1px solid #e0e0e0;
            border-radius: 4px;
        }
        .test-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }
        .test-description {
            margin-bottom: 15px;
            color: #666;
            line-height: 1.5;
        }
        .test-result {
            padding: 10px;
            border-radius: 4px;
            font-weight: bold;
        }
        .success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .code-block {
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 10px;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            white-space: pre-wrap;
            margin: 10px 0;
        }
        .test-button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        .test-button:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>Note Content Fix Test</h1>
        <p>This test validates the defensive programming fixes for the noteContent.trim() error.</p>
        
        <div class="test-case">
            <div class="test-title">Test Case 1: String Note Content</div>
            <div class="test-description">
                Tests that noteContent.trim() works correctly when noteContent is a string.<br>
                Expected: No error, trim() method available.
            </div>
            <button class="test-button" onclick="testStringNote()">Test String Note</button>
            <div id="result1" class="test-result"></div>
        </div>
        
        <div class="test-case">
            <div class="test-title">Test Case 2: Numeric Note Content</div>
            <div class="test-description">
                Tests that noteContent.trim() works correctly when noteContent is a number.<br>
                Expected: No error after defensive fix (converted to string).
            </div>
            <button class="test-button" onclick="testNumericNote()">Test Numeric Note</button>
            <div id="result2" class="test-result"></div>
        </div>
        
        <div class="test-case">
            <div class="test-title">Test Case 3: Null/Undefined Note Content</div>
            <div class="test-description">
                Tests that noteContent.trim() works correctly when noteContent is null or undefined.<br>
                Expected: No error after defensive fix (converted to empty string).
            </div>
            <button class="test-button" onclick="testNullNote()">Test Null Note</button>
            <div id="result3" class="test-result"></div>
        </div>
        
        <div class="test-case">
            <div class="test-title">Test Case 4: Object Note Content</div>
            <div class="test-description">
                Tests that noteContent.trim() works correctly when noteContent is an object.<br>
                Expected: No error after defensive fix (converted to string).
            </div>
            <button class="test-button" onclick="testObjectNote()">Test Object Note</button>
            <div id="result4" class="test-result"></div>
        </div>
        
        <div class="test-case">
            <div class="test-title">Test Case 5: Note Content Comparison</div>
            <div class="test-description">
                Tests that noteContent comparison works correctly with different data types.<br>
                Expected: Correct comparison after defensive fix.
            </div>
            <button class="test-button" onclick="testNoteComparison()">Test Note Comparison</button>
            <div id="result5" class="test-result"></div>
        </div>
        
        <div class="code-block">
            <strong>Test Code:</strong><br>
            <pre id="testCode">
// Test functions
function testStringNote() {
    const noteContent = "This is a test note";
    const originalNoteContent = "Original note content";
    
    try {
        const isNoteChanged = noteContent && noteContent.trim() !== originalNoteContent.trim();
        return { success: true, message: "String note works correctly" };
    } catch (error) {
        return { success: false, message: "Error: " + error.message };
    }
}

function testNumericNote() {
    const noteContent = 1234; // Numeric value like from your example
    const originalNoteContent = "Original note content";
    
    try {
        // Before fix: This would cause "noteContent.trim is not a function"
        // After fix: noteContent should be converted to string
        const noteContentStr = String(noteContent || '');
        const originalNoteContentStr = String(originalNoteContent || '');
        const isNoteChanged = noteContentStr && noteContentStr.trim() !== originalNoteContentStr.trim();
        return { success: true, message: "Numeric note works correctly after fix" };
    } catch (error) {
        return { success: false, message: "Error: " + error.message };
    }
}

function testNullNote() {
    const noteContent = null;
    const originalNoteContent = "Original note content";
    
    try {
        const noteContentStr = String(noteContent || '');
        const originalNoteContentStr = String(originalNoteContent || '');
        const isNoteChanged = noteContentStr && noteContentStr.trim() !== originalNoteContentStr.trim();
        return { success: true, message: "Null note works correctly" };
    } catch (error) {
        return { success: false, message: "Error: " + error.message };
    }
}

function testObjectNote() {
    const noteContent = { note: "This is an object" };
    const originalNoteContent = "Original note content";
    
    try {
        const noteContentStr = String(noteContent || '');
        const originalNoteContentStr = String(originalNoteContent || '');
        const isNoteChanged = noteContentStr && noteContentStr.trim() !== originalNoteContentStr.trim();
        return { success: true, message: "Object note works correctly after fix" };
    } catch (error) {
        return { success: false, message: "Error: " + error.message };
    }
}

function testNoteComparison() {
    const testCases = [
        { noteContent: "string", originalNoteContent: "string" },
        { noteContent: 1234, originalNoteContent: "string" },
        { noteContent: null, originalNoteContent: "string" },
        { noteContent: undefined, originalNoteContent: "string" },
        { noteContent: { note: "object" }, originalNoteContent: "string" }
    ];
    
    let allPassed = true;
    let results = [];
    
    for (const testCase of testCases) {
        try {
            const noteContentStr = String(testCase.noteContent || '');
            const originalNoteContentStr = String(testCase.originalNoteContent || '');
            const isNoteChanged = noteContentStr && noteContentStr.trim() !== originalNoteContentStr.trim();
            results.push(`Case (${JSON.stringify(testCase.noteContent)} vs ${JSON.stringify(testCase.originalNoteContent)}): ${isNoteChanged ? "CHANGED" : "UNCHANGED"}`);
        } catch (error) {
            results.push(`Case (${JSON.stringify(testCase.noteContent)} vs ${JSON.stringify(testCase.originalNoteContent)}): ERROR - ${error.message}`);
            allPassed = false;
        }
    }
    
    return { success: allPassed, results: results };
}

// Run all tests
function runAllTests() {
    const results = [
        testStringNote(),
        testNumericNote(),
        testNullNote(),
        testObjectNote(),
        testNoteComparison()
    ];
    
    console.log("Test Results:", results);
    return results;
}
            </pre>
        </div>
        
        <div style="margin-top: 30px;">
            <button class="test-button" onclick="runAllTests()">Run All Tests</button>
        </div>
    </div>
</body>
</html>